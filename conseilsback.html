<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="index.js"></script>
    <title>Document</title>
</head>

<body style="background-color: white;">
    <div style="background :#ff8013;">
        <form action="commentaire.php" method="POST">

            <label> Name:
                <input id="username" type="text" name="username" class="Input" style="width: 225px" required>
            </label>
            <br><br>
            <label> Conseils: <br>
                <textarea maxlength="120" id="usercomment" name="usercomment" class="Input" style="width: 300px"
                    required></textarea>
            </label>
            <br><br>


        </form>

    </div>
    <div style="background :#ffffff;">
        <label for="img">Select image:</label>
        <input type="file" id="img" name="img" accept="image/*">

    </div>

    <div>
        <div style="background :#ff8013;"><input onclick="checklanguage()" type="button" name="Submit"
                value="poster vos conseils " class="Submit">
        </div>

        <div id="displaycomment"></div>
        <script>
            var swear_words_arr = new Array("souhail", "bitch", "sucks");
            var countingbadwords;

            function displayComment() {
                commentbox = document.createElement('div');
                commentbox.setAttribute("class", "commentbox");
                br = document.createElement("br");
                g = document.createElement('div');
                g.setAttribute("class", "usernameincomment");
                g1 = document.createElement('div');
                g1.setAttribute("class", "usernamecommentincomment");
                document.getElementById("displaycomment").appendChild(commentbox);
                document.getElementById("displaycomment").lastChild.appendChild(g)
                document.getElementById("displaycomment").lastChild.lastChild.innerHTML +=
                    document.getElementById("username").value;
                document.getElementById("displaycomment").lastChild.appendChild(g1);
                document.getElementById("displaycomment").lastChild.lastChild.innerHTML +=
                    document.getElementById("usercomment").value;

                //display image
                imgdiv = document.createElement('img');
                document.getElementById("displaycomment").lastChild.appendChild(imgdiv);
                var imgidpath = document.getElementById(
                    "img");
                var fReader = new FileReader();
                fReader.readAsDataURL(imgidpath.files[0]);
                fReader.onloadend = function (event) {
                    var img = document.getElementById("displaycomment").lastChild.lastChild;
                    img.src = event.target.result;
                }
                document.getElementById("displaycomment").lastChild.lastChild.setAttribute("width", "500px");



            }

            function checklanguage() {
                countingbadwords = 0;
                var textcom = document.getElementById("usercomment").value;
                teds = document.getElementById("img").value;
                for (var i = 0; i < swear_words_arr.length; i++) {
                    if (textcom.includes(swear_words_arr[i])) { //fuck
                        countingbadwords++;
                        window.alert("please veify your comment");
                    }
                }
                if (countingbadwords == 0) {
                    displayComment();
                }


            }
        </script>
    </div>
</body>
